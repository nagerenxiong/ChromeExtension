function n(n,t){var n,e;"function"==typeof n&&(t=n,n=29),o(function(n){return n?void e():t({error:D})}),e=function(){$.get("http://pub.alimama.com/common/adzone/newSelfAdzone2.json",{tag:n,t:Date.now()},function(n){t("string"==typeof n?{error:D}:n)})}}function t(n,t,e,i){0===t.indexOf("mm_")&&(t=t.substring(3)),$.post("http://www.qumai.org/cm/get_tbk.php",{iid:e,pid:t,qid:n},function(n){"string"==typeof n&&(n=JSON.parse(n)),n.clickUrl=n.tbk_url,i({data:n})})}function e(n,t,e){var i,r=g(n),o=t.split("_");i=function(n,t,i){var o=$.get("http://pub.alimama.com/common/code/getAuctionCode.json",{auctionid:r.id,siteid:t,adzoneid:i,t:Date.now(),_input_charset:"utf-8"});o.done(function(n){return"string"==typeof n?e({error:D}):void e(n.data.clickUrl?{data:n.data}:n.data.frequenctCheckFail?{error:"\u8bf7\u6c42\u8fc7\u5feb\uff0c\u963f\u91cc\u670d\u52a1\u5668\u5c4f\u853d\u4e86\u8bf7\u6c42"}:"auction"===n.data.type?{error:"\u8be5\u5546\u54c1\u6ca1\u6709\u53c2\u4e0e\u63a8\u5e7f"}:{error:C})}),o.fail(function(){e({error:_})})},r.id?i(o[1],o[2],o[3]):h(n,function(n){return r=g(n),r.id?void i(o[1],o[2],o[3]):e({error:"\u6682\u4e0d\u652f\u6301\u7684\u6b64\u5546\u54c1"})})}function i(n,t){var e=$.get("http://pub.alimama.com/pubauc/getCommonCampaignDetails.json",{oriMemberid:n,t:Date.now(),_input_charset:"utf-8"});e.done(function(e){e&&e.data.campaignList?(e.data.campaignList.forEach(function(t){t.userNumberId=n}),t({data:e.data.campaignList})):t({error:C})}),e.fail(function(){t({error:_})})}function r(n,t){async.waterfall([function(n){var t;return N.siteid?n(null,N.siteid,N.adzoneid):(t=$.get("http://pub.alimama.com/common/adzone/newSelfAdzone2.json?tag=29&t="+Date.now()),t.done(function(t){var e,i=t.data.otherAdzones;i&&i.length>0?(e=i[0],n(null,e.id,e.sub[0].id)):n("maybe you should login")}),void t.fail(function(){n("maybe you should login")}))},function(n,t,e){var i=$.get("http://pub.alimama.com/common/code/getAuctionCode.json",{siteid:n,adzoneid:t,auctionid:q.id});i.done(function(n){e(null,n.data)}),i.fail(function(){e("net error")}),N.siteid=n,N.adzoneid=t}],t)}function o(n){$.getJSON("http://pub.alimama.com/common/getUnionPubContextInfo.json",function(t){return n(t&&t.data&&(t=t.data,t.memberid)?!0:!1)})}function a(n,t,e){var i,r,a,u,c=n;n=v(n),r=function(t){t.url=n,t.originalUrl=c,L[n]=t,e(t)},i=g(n).id,i?o(function(o){o?m(n,i,r):t?p(i,r):(r=null,e({data:"login"}))}):async.parallel([function(t){h(n,function(){a=arguments[0],t()})},function(n){o(function(){u=arguments[0],n()})}],function(){var n=g(a).id;return n?void(u?m(a,n,r):t?p(n,r):(r=null,e({data:"login"}))):r({})})}function u(n){async.parallel([function(){var t=g(n).id;$.get("http://www.qumai.org/sendDetail.php?iid="+t)}])}function c(n,t){$.get("http://www.qumai.org/cm/getcat.php?cat="+n,function(n){t(JSON.parse(n))})}function f(n,t){var e=g(n).id;$.get("http://www.qumai.org/cm/addgyj.php?iid="+e,function(n){t(JSON.parse(n))})}function l(n,t){o(function(e){return e?void chrome.cookies.get({url:"http://alimama.com/",name:"_tb_token_"},function(e){var i=e.value;$.get("http://pub.alimama.com/campaign/joinedCampaigns.json?spm=a219t.7473494.1998155389.4.cEsQhG&toPage=1&nickname="+n+"&perPageSize=40&t=1448861167070&_input_charset=utf-8&_tb_token_="+i,function(n){t(n)})}):t({data:{pagelist:[{login:"no"}]}})})}function s(n,t,e){var i=n.campaignId,r=n.campaignName,o=n.keeperExtName,a=n.oriMemberId,u=n.shopKeeperId,c=n.createTime,f=g(t).id;$.post("http://www.qumai.org/cm/postyc.php",{campaignId:i,campaignName:r,keeperExtName:o,oriMemberId:a,shopKeeperId:u,iid:f,createTime:c},function(n){})}function p(n,t){var e={},i={0:"\u5426",1:"\u5426",3:"\u662f"};async.parallel([function(t){$.get("http://www.qumai.org/getalimama.php?iid="+n,function(n){e.item=(n?JSON.parse(n):{})||{},e.plans=e.item.campaignList||[],e.plans.forEach(function(n){n.properties in i&&(n.properties=i[n.properties]),n.AvgCommission=n.avgCommissionToString,n.userNumberId=e.item.userNumberId,n.auctionId=e.item.auctionId}),delete e.item.campaignList,e.item.totalFee||(e.item.totalFee=e.item.totalfee),e.item.totalNum||(e.item.totalNum=e.item.totalnum),e.item.commissionRatePercent=e.item.commissionRate}).fail(function(){e.item={},e.plans=[]}).always(function(){t()})},function(t){$.get("http://www.qumai.org/cm/getqj.php?iid="+n,function(n){e.queqiao=(n?JSON.parse(n):[])||[],e.queqiao.forEach(function(n){"\u672a\u5f00\u59cb"===n.ltime?n.color="green":n.ltime<0?n.color="red":n.color=""})}).always(function(){t()})}],function(){t(e)})}function m(n,t,e){var i={};async.parallel([function(t){$.getJSON("http://pub.alimama.com/pubauc/searchAuctionList.json",{t:Date.now(),q:n,toPage:1,perPagesize:40,_input_charset:"utf-8"},function(n){n=n.data,i.item=n.pagelist?n.pagelist[0]:{}}).always(function(){t()})},function(n){$.get("http://www.qumai.org/cm/getqj.php?iid="+t,function(n){i.queqiao=(n?JSON.parse(n):[])||[],i.queqiao.forEach(function(n){"\u672a\u5f00\u59cb"===n.ltime?n.color="green":n.ltime<0?n.color="red":n.color=""})}).always(function(){n()})}],function(){i.item.userNumberId?$.get("http://pub.alimama.com/pubauc/getCommonCampaignDetails.json",{oriMemberid:i.item.userNumberId,t:Date.now(),_input_charset:"utf-8"},function(n){i.plans=n.data.campaignList||[],i.plans.forEach(function(n){n.userNumberId=i.item.userNumberId,n.auctionId=i.item.auctionId,1==n.ExistStatus?n.Exists='<span style="color:#f60">\u5ba1\u6838\u4e2d</span>':3==n.ExistStatus?n.Exists='<span style="color:red">\u5ba1\u6838\u62d2\u7edd</span>':n.Exists=n.Exist?'<span style="color:#5aa62e">\u901a\u8fc7</span>':""}),e(i)}).fail(function(){i.plans=[],e(i)}):(i.plans=[],e(i))})}function d(n,t){var e="http://www.qumai.org/cm/getitemid.php?url="+encodeURIComponent(n),i=new XMLHttpRequest;i.addEventListener("load",function(){var e,i=JSON.parse(this.responseText);if(i&&i.url){if(e=decodeURIComponent(i.url),y(e))return t(e);if(e=g(i.url).tar)return e=decodeURIComponent(e),t(e)}t(n)}),i.open("GET",e),i.send()}function h(n,t){var e;n.indexOf("click.simba.taobao.com")>-1?(e=new XMLHttpRequest,e.addEventListener("load",function(){t(this.responseURL)}),e.open("GET",n),e.send()):n.indexOf("s.click.taobao.com")>-1?d(n,t):(console.log("\u4e0d\u652f\u6301\u7684\u0020\u0055\u0052\u004c\u0020\u8f6c\u6362",n),t(n))}function g(n){var t,e,i,r,o={};if(e=n.indexOf("?"),e>-1)for(t=n.substring(e+1).split("&"),e=0,i=t.length;i>e;e++)r=t[e].split("="),o[r[0]]=r[1];return o}function v(n){var t=g(n);return t.id?n.split("?").shift()+"?id="+t.id:n}function y(n){var t=["item.taobao.com/item.htm","detail.tmall.com","ai.taobao.com/auction/edetail.htm"],e=!1;return t.forEach(function(t){var i=n.indexOf(t);return i>=0&&9>i?(e=!0,!0):void 0}),e}function b(n,t){$.get("http://www.qumai.org/cm/getqj.php?iid="+n,function(n){var n=$.parseJSON(n);t(n||[])})}function w(n){chrome.storage.local.get("pid",function(t){var e=t.pid?t.pid.split("_"):!1;e?(e.shift(),n.apply(null,e)):n()})}function k(n,t){chrome.notifications.create("hello",{type:"basic",iconUrl:"../icon32.png",title:n,message:t})}function I(){chrome.storage.local.set({cache:L},function(){console.log("saved success!")})}function O(){chrome.tabs.create({url:"http://www.qumai.org/vip/register.php",active:!0})}function E(n,t){var e=function(e){chrome.tabs.sendMessage(e.id,{cmd:"sq",params:n},t)};o(function(n){return n?void chrome.tabs.query({url:"*://pub.alimama.com/*"},function(n){n.length?e(n[0]):chrome.tabs.create({url:"http://pub.alimama.com"},e)}):t({error:D})})}function S(n,t){var e,i=1;o(function(r){return r?void async.whilst(function(){return i>0},function(t){$.get("http://pub.alimama.com/campaign/merchandiseDetail.json",{campaignId:n.CampaignID,shopkeeperId:n.ShopKeeperID,userNumberId:n.userNumberId,tab:2,toPage:i,omid:n.userNumberId,perPagesize:10,t:Date.now(),_input_charset:"utf-8"},function(t){var r=!1;t.data.pagelist&&t.data.pagelist.length&&t.data.pagelist.forEach(function(t){return t.auctionId===n.auctionId?(r=!0,e=t.commissionRatePercent+"%",!1):void 0}),r?i=-1:i++}).always(function(){t()})},function(){t({data:e})}):t({error:D})})}!function(){function n(){}function t(n){return n}function e(n){return!!n}function i(n){return!n}function r(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function o(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}function a(n){return U(n)||"number"==typeof n.length&&n.length>=0&&n.length%1===0}function u(n,t){return a(n)?c(n,t):p(n,t)}function c(n,t){for(var e=-1,i=n.length;++e<i;)t(n[e],e,n)}function f(n,t){for(var e=-1,i=n.length,r=Array(i);++e<i;)r[e]=t(n[e],e,n);return r}function l(n){return f(Array(n),function(n,t){return t})}function s(n,t,e){return c(n,function(n,i,r){e=t(e,n,i,r)}),e}function p(n,t){c(R(n),function(e){t(n[e],e)})}function m(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}function d(n){var t,e,i=-1;return a(n)?(t=n.length,function(){return i++,t>i?i:null}):(e=R(n),t=e.length,function(){return i++,t>i?e[i]:null})}function h(n,t){return t=null==t?n.length-1:+t,function(){for(var e=Math.max(arguments.length-t,0),i=Array(e),r=0;e>r;r++)i[r]=arguments[r+t];switch(t){case 0:return n.call(this,i);case 1:return n.call(this,arguments[0],i)}}}function g(n){return function(t,e,i){return n(t,i)}}function v(t){return function(e,i,a){a=o(a||n),e=e||[];var u=d(e);if(0>=t)return a(null);var c=!1,f=0,l=!1;!function s(){if(c&&0>=f)return a(null);for(;t>f&&!l;){var n=u();if(null===n)return c=!0,void(0>=f&&a(null));f+=1,i(e[n],n,r(function(n){f-=1,n?(a(n),l=!0):s()}))}}()}}function y(n){return function(t,e,i){return n(D.eachOf,t,e,i)}}function b(n){return function(t,e,i,r){return n(v(e),t,i,r)}}function w(n){return function(t,e,i){return n(D.eachOfSeries,t,e,i)}}function k(t,e,i,r){r=o(r||n);var a=[];t(e,function(n,t,e){i(n,function(n,i){a[t]=i,e(n)})},function(n){r(n,a)})}function I(n,t,e,i){var r=[];n(t,function(n,t,i){e(n,function(e){e&&r.push({index:t,value:n}),i()})},function(){i(f(r.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function q(n,t,e,i){I(n,t,function(n,t){e(n,function(n){t(!n)})},i)}function O(n,t,e){return function(i,r,o,a){function u(){a&&a(e(!1,void 0))}function c(n,i,r){return a?void o(n,function(i){a&&t(i)&&(a(e(!0,n)),a=o=!1),r()}):r()}arguments.length>3?n(i,r,c,u):(a=o,o=r,n(i,c,u))}}function E(n,t){return t}function S(t,e,i){i=i||n;var r=a(e)?[]:{};t(e,function(n,t,e){n(h(function(n,i){i.length<=1&&(i=i[0]),r[t]=i,e(n)}))},function(n){i(n,r)})}function x(n,t,e,i){var r=[];n(t,function(n,t,i){e(n,function(n,t){r=r.concat(t||[]),i(n)})},function(n){i(n,r)})}function j(t,e,i){function o(t,e,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length&&t.idle()?D.setImmediate(function(){t.drain()}):(c(e,function(e){var o={data:e,callback:r||n};i?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void D.setImmediate(t.process))}function a(n,t){return function(){u-=1;var e=arguments;c(t,function(n){n.callback.apply(n,e)}),n.tasks.length+u===0&&n.drain(),n.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var u=0,l={tasks:[],concurrency:e,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(n,t){o(l,n,!1,t)},kill:function(){l.drain=n,l.tasks=[]},unshift:function(n,t){o(l,n,!0,t)},process:function(){if(!l.paused&&u<l.concurrency&&l.tasks.length)for(;u<l.concurrency&&l.tasks.length;){var n=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),e=f(n,function(n){return n.data});0===l.tasks.length&&l.empty(),u+=1;var i=r(a(l,n));t(e,i)}},length:function(){return l.tasks.length},running:function(){return u},idle:function(){return l.tasks.length+u===0},pause:function(){l.paused=!0},resume:function(){if(l.paused!==!1){l.paused=!1;for(var n=Math.min(l.concurrency,l.tasks.length),t=1;n>=t;t++)D.setImmediate(l.process)}}};return l}function L(n){return h(function(t,e){t.apply(null,e.concat([h(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))})]))})}function N(n){return function(t,e,i){n(l(t),e,i)}}function _(n){return h(function(t,e){var i=h(function(e){var i=this,r=e.pop();return n(t,function(n,t,r){n.apply(i,e.concat([r]))},r)});return e.length?i.apply(this,e):i})}function C(n){return h(function(t){var e=t.pop();t.push(function(){var n=arguments;i?D.setImmediate(function(){e.apply(null,n)}):e.apply(null,n)});var i=!0;n.apply(this,t),i=!1})}var z,D={},A="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=A&&(z=A.async),D.noConflict=function(){return A.async=z,D};var T=Object.prototype.toString,U=Array.isArray||function(n){return"[object Array]"===T.call(n)},P=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},R=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},M="function"==typeof setImmediate&&setImmediate,J=M?function(n){M(n)}:function(n){setTimeout(n,0)};"object"==typeof process&&"function"==typeof process.nextTick?D.nextTick=process.nextTick:D.nextTick=J,D.setImmediate=M?J:D.nextTick,D.forEach=D.each=function(n,t,e){return D.eachOf(n,g(t),e)},D.forEachSeries=D.eachSeries=function(n,t,e){return D.eachOfSeries(n,g(t),e)},D.forEachLimit=D.eachLimit=function(n,t,e,i){return v(t)(n,g(e),i)},D.forEachOf=D.eachOf=function(t,e,i){function c(n){n?i(n):(l+=1,l>=f&&i(null))}i=o(i||n),t=t||[];var f=a(t)?t.length:R(t).length,l=0;return f?void u(t,function(n,i){e(t[i],i,r(c))}):i(null)},D.forEachOfSeries=D.eachOfSeries=function(t,e,i){function a(){var n=!0;return null===c?i(null):(e(t[c],c,r(function(t){if(t)i(t);else{if(c=u(),null===c)return i(null);n?D.nextTick(a):a()}})),void(n=!1))}i=o(i||n),t=t||[];var u=d(t),c=u();a()},D.forEachOfLimit=D.eachOfLimit=function(n,t,e,i){v(t)(n,e,i)},D.map=y(k),D.mapSeries=w(k),D.mapLimit=b(k),D.inject=D.foldl=D.reduce=function(n,t,e,i){D.eachOfSeries(n,function(n,i,r){e(t,n,function(n,e){t=e,r(n)})},function(n){i(n||null,t)})},D.foldr=D.reduceRight=function(n,e,i,r){var o=f(n,t).reverse();D.reduce(o,e,i,r)},D.select=D.filter=y(I),D.selectLimit=D.filterLimit=b(I),D.selectSeries=D.filterSeries=w(I),D.reject=y(q),D.rejectLimit=b(q),D.rejectSeries=w(q),D.any=D.some=O(D.eachOf,e,t),D.someLimit=O(D.eachOfLimit,e,t),D.all=D.every=O(D.eachOf,i,i),D.everyLimit=O(D.eachOfLimit,i,i),D.detect=O(D.eachOf,t,E),D.detectSeries=O(D.eachOfSeries,t,E),D.detectLimit=O(D.eachOfLimit,t,E),D.sortBy=function(n,t,e){function i(n,t){var e=n.criteria,i=t.criteria;return i>e?-1:e>i?1:0}D.map(n,function(n,e){t(n,function(t,i){t?e(t):e(null,{value:n,criteria:i})})},function(n,t){return n?e(n):void e(null,f(t.sort(i),function(n){return n.value}))})},D.auto=function(t,e){function i(n){d.unshift(n)}function r(n){var t=m(d,n);t>=0&&d.splice(t,1)}function a(){f--,c(d.slice(0),function(n){n()})}e=o(e||n);var u=R(t),f=u.length;if(!f)return e(null);var l={},d=[];i(function(){f||e(null,l)}),c(u,function(n){function o(){return s(g,function(n,t){return n&&l.hasOwnProperty(t)},!0)&&!l.hasOwnProperty(n)}function u(){o()&&(r(u),f[f.length-1](d,l))}for(var c,f=U(t[n])?t[n]:[t[n]],d=h(function(t,i){if(i.length<=1&&(i=i[0]),t){var r={};p(l,function(n,t){r[t]=n}),r[n]=i,e(t,r)}else l[n]=i,D.setImmediate(a)}),g=f.slice(0,f.length-1),v=g.length;v--;){if(!(c=t[g[v]]))throw new Error("Has inexistant dependency");if(U(c)&&m(c,n)>=0)throw new Error("Has cyclic dependencies")}o()?f[f.length-1](d,l):i(u)})},D.retry=function(n,t,e){function i(n,t){if("number"==typeof t)n.times=parseInt(t,10)||o;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||o,n.interval=parseInt(t.interval,10)||a}}function r(n,t){function e(n,e){return function(i){n(function(n,t){i(!n||e,{err:n,result:t})},t)}}function i(n){return function(t){setTimeout(function(){t(null)},n)}}for(;c.times;){var r=!(c.times-=1);u.push(e(c.task,r)),!r&&c.interval>0&&u.push(i(c.interval))}D.series(u,function(t,e){e=e[e.length-1],(n||c.callback)(e.err,e.result)})}var o=5,a=0,u=[],c={times:o,interval:a},f=arguments.length;if(1>f||f>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=f&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&i(c,n),c.callback=e,c.task=t,c.callback?r():r},D.waterfall=function(t,e){function i(n){return h(function(t,r){if(t)e.apply(null,[t].concat(r));else{var o=n.next();o?r.push(i(o)):r.push(e),C(n).apply(null,r)}})}if(e=o(e||n),!U(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void i(D.iterator(t))():e()},D.parallel=function(n,t){S(D.eachOf,n,t)},D.parallelLimit=function(n,t,e){S(v(t),n,e)},D.series=function(n,t){S(D.eachOfSeries,n,t)},D.iterator=function(n){function t(e){function i(){return n.length&&n[e].apply(null,arguments),i.next()}return i.next=function(){return e<n.length-1?t(e+1):null},i}return t(0)},D.apply=h(function(n,t){return h(function(e){return n.apply(null,t.concat(e))})}),D.concat=y(x),D.concatSeries=w(x),D.whilst=function(t,e,i){if(i=i||n,t()){var r=h(function(n,o){n?i(n):t.apply(this,o)?e(r):i(null)});e(r)}else i(null)},D.doWhilst=function(n,t,e){var i=0;return D.whilst(function(){return++i<=1||t.apply(this,arguments)},n,e)},D.until=function(n,t,e){return D.whilst(function(){return!n.apply(this,arguments)},t,e)},D.doUntil=function(n,t,e){return D.doWhilst(n,function(){return!t.apply(this,arguments)},e)},D.during=function(t,e,i){i=i||n;var r=h(function(n,e){n?i(n):(e.push(o),t.apply(this,e))}),o=function(n,t){n?i(n):t?e(r):i(null)};t(o)},D.doDuring=function(n,t,e){var i=0;D.during(function(n){i++<1?n(null,!0):t.apply(this,arguments)},n,e)},D.queue=function(n,t){var e=j(function(t,e){n(t[0],e)},t,1);return e},D.priorityQueue=function(t,e){function i(n,t){return n.priority-t.priority}function r(n,t,e){for(var i=-1,r=n.length-1;r>i;){var o=i+(r-i+1>>>1);e(t,n[o])>=0?i=o:r=o-1}return i}function o(t,e,o,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");return t.started=!0,U(e)||(e=[e]),0===e.length?D.setImmediate(function(){t.drain()}):void c(e,function(e){var u={data:e,priority:o,callback:"function"==typeof a?a:n};t.tasks.splice(r(t.tasks,u,i)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),D.setImmediate(t.process)})}var a=D.queue(t,e);return a.push=function(n,t,e){o(a,n,t,e)},delete a.unshift,a},D.cargo=function(n,t){return j(n,1,t)},D.log=L("log"),D.dir=L("dir"),D.memoize=function(n,e){var i={},r={};e=e||t;var o=h(function(t){var o=t.pop(),a=e.apply(null,t);a in i?D.nextTick(function(){o.apply(null,i[a])}):a in r?r[a].push(o):(r[a]=[o],n.apply(null,t.concat([h(function(n){i[a]=n;var t=r[a];delete r[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,n)})])))});return o.memo=i,o.unmemoized=n,o},D.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},D.times=N(D.map),D.timesSeries=N(D.mapSeries),D.timesLimit=function(n,t,e,i){return D.mapLimit(l(n),t,e,i)},D.seq=function(){var t=arguments;return h(function(e){var i=this,r=e[e.length-1];"function"==typeof r?e.pop():r=n,D.reduce(t,e,function(n,t,e){t.apply(i,n.concat([h(function(n,t){e(n,t)})]))},function(n,t){r.apply(i,[n].concat(t))})})},D.compose=function(){return D.seq.apply(null,Array.prototype.reverse.call(arguments))},D.applyEach=_(D.eachOf),D.applyEachSeries=_(D.eachOfSeries),D.forever=function(t,e){function i(n){return n?o(n):void a(i)}var o=r(e||n),a=C(t);i()},D.ensureAsync=C,D.constant=h(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),D.wrapSync=D.asyncify=function(n){return h(function(t){var e,i=t.pop();try{e=n.apply(this,t)}catch(r){return i(r)}P(e)&&"function"==typeof e.then?e.then(function(n){i(null,n)})["catch"](function(n){i(n.message?n:new Error(n))}):i(null,e)})},"object"==typeof module&&module.exports?module.exports=D:"function"==typeof define&&define.amd?define([],function(){return D}):A.async=D}();var x=!0,j=0,L={},N={},_="\u8bf7\u6c42\u7684\u65f6\u5019\u53d1\u751f\u9519\u8bef\u4e86",C="\u963f\u91cc\u670d\u52a1\u5668\u53ef\u80fd\u51fa\u95ee\u9898\u4e86",z="\u4e0d\u662f\u6709\u6548\u7684\u5546\u54c1\u94fe\u63a5",D="\u8bf7\u767b\u5f55\u963f\u91cc\u5988\u5988\u540e\u91cd\u8bd5\uff01",A="4";chrome.storage.local.get("cache",function(n){n.cache&&(L=n.cache)}),function(){var r;chrome.storage.local.get("qmlogin",function(n){n.qmlogin&&(r=n.qmlogin)}),setInterval(function(){chrome.storage.local.get("qmlogin",function(n){var t=n.qmlogin,e=Date.now(),i=2592e6;t&&t.success===!0&&e-t.start>i&&(r=null,chrome.storage.local.set({qmlogin:null}))})},6e4),chrome.runtime.onMessage.addListener(function(o,p,m){if("islogin"===o.cmd)return m(r);if("login"===o.cmd)return r=o.data,r.start=Date.now(),void chrome.storage.local.set({qmlogin:r});if(!r)return m({data:"user"});if("getItemInfo"===o.cmd)return a(o.url,o.qumai,m),!0;if("getRealUrl"===o.cmd)return h(o.url,m),!0;if("getRealUrlByQuMai"===o.cmd)return d(o.url,m),!0;if("queqiao"===o.cmd)return b(o.id,m),!0;if("plans"===o.cmd)return i(o.id,m),!0;if("qq-link"===o.cmd)return t(o.id,o.pid,o.itemId,m),!0;if("link"===o.cmd)return e(o.url,o.pid,m),!0;if("tuiguang"===o.cmd)return e(o.url,o.pid,m),!0;if("adzone"===o.cmd)return n(o.tag,m),!0;if("register"===o.cmd)O();else{if("applyPlan"===o.cmd)return E(o.data,m),!0;if("planyj"===o.cmd)return S(o.data,m),!0;if("sendDetail"===o.cmd)return u(o.url),!0;if("getCat"===o.cmd)return c(o.rootcat,m),!0;if("addgyj"===o.cmd)return f(o.url,m),!0;if("getYincang"===o.cmd)return l(o.nick,m),!0;if("postyingcang"===o.cmd)return s(o.data,o.url,m),!0}})}();